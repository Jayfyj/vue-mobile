(this.webpackJsonp=this.webpackJsonp||[]).push([["chunk-fb34e4fa"],{"160c":function(e,t,a){"use strict";a.r(t),a("7e5a"),a("cbee"),a("3328"),a("6ffc"),a("f698"),a("cb0b3"),a("3aac");var c=a("cf45"),n=a("2e36"),i={name:"faceRecognitionPage",setup:function(){var e=Object(n.f)(null),t=Object(n.f)(!1),a=Object(n.f)(null),i=Object(n.f)(!1),o=Object(n.f)(""),s=null;function r(){i.value=!0;var e=new window.tracking.ObjectTracker("face");e.setInitialScale(4),e.setStepSize(2),e.setEdgesDensity(.1),s=window.tracking.track("#video",e,{camera:!0}),e.on("track",(function(e){e.data.length>0&&i.value&&u()}))}function u(){i.value=!1;var t=a.value,n=e.value,s=t.getContext("2d");s.clearRect(0,0,t.width,t.height),s.drawImage(n,0,0,t.width,t.height);var r=t.toDataURL("image/jpeg"),u=URL.createObjectURL(Object(c.a)(r));o.value=u,sessionStorage.setItem("userInfoImg",u)}function l(){s.stop(),e.value.srcObject.getTracks()[0].stop()}return Object(n.c)((function(){r()})),Object(n.d)((function(){l()})),{videoRef:e,screenshotCanvasRef:a,uploadLock:i,picShow:t,userHeaderImg:o,init:r,screenshotAndUpload:u,close:l}}},o=(a("c6e3"),a("cba8")),s=Object(o.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("LayOutIndex",{attrs:{titleShow:"",back:"",userHeaderImg:e.userHeaderImg}},[a("div",{staticClass:"video-box"},[a("video",{ref:"videoRef",attrs:{id:"video",preload:"",autoplay:"",loop:"",muted:""},domProps:{muted:!0}})]),a("canvas",{ref:"screenshotCanvasRef",style:{display:e.picShow?"":"none"},attrs:{id:"screenshotCanvas",width:"320",height:"240"}}),a("div",{staticClass:"btnHandle"},[a("van-button",{attrs:{type:"primary"},on:{click:e.init}},[e._v("开启摄像头")]),a("van-button",{attrs:{type:"primary"},on:{click:function(t){e.picShow=!e.picShow}}},[e._v(e._s(e.picShow?"不看了":"照片看看"))]),a("van-button",{attrs:{type:"primary"},on:{click:e.close}},[e._v("关闭摄像头")])],1)])}),[],!1,null,"c6463a8c",null);t.default=s.exports},"41b8":function(e,t,a){},c6e3:function(e,t,a){"use strict";a("41b8")}}]);