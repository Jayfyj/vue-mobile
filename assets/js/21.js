(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{393:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("LayOutIndex",{attrs:{titleShow:"",back:"",userHeaderImg:e.userHeaderImg}},[a("div",{staticClass:"video-box"},[a("video",{ref:"videoRef",attrs:{id:"video",preload:"",autoplay:"",loop:"",muted:""},domProps:{muted:!0}})]),a("canvas",{ref:"screenshotCanvasRef",style:{display:e.picShow?"":"none"},attrs:{id:"screenshotCanvas",width:"320",height:"240"}}),a("div",{staticClass:"btnHandle"},[a("van-button",{attrs:{type:"primary"},on:{click:e.init}},[e._v("开启摄像头")]),a("van-button",{attrs:{type:"primary"},on:{click:function(t){e.picShow=!e.picShow}}},[e._v(e._s(e.picShow?"不看了":"照片看看"))]),a("van-button",{attrs:{type:"primary"},on:{click:e.close}},[e._v("关闭摄像头")])],1)])};n._withStripped=!0,a(9),a(27),a(18),a(415),a(410),a(432),a(433);var c=a(152),i=a(22),o={name:"faceRecognitionPage",setup:function(){var e=Object(i.f)(null),t=Object(i.f)(!1),a=Object(i.f)(null),n=Object(i.f)(!1),o=Object(i.f)(""),s=null;function r(){n.value=!0;var e=new window.tracking.ObjectTracker("face");e.setInitialScale(4),e.setStepSize(2),e.setEdgesDensity(.1),s=window.tracking.track("#video",e,{camera:!0}),e.on("track",(function(e){e.data.length>0&&n.value&&u()}))}function u(){n.value=!1;var t=a.value,i=e.value,s=t.getContext("2d");s.clearRect(0,0,t.width,t.height),s.drawImage(i,0,0,t.width,t.height);var r=t.toDataURL("image/jpeg"),u=URL.createObjectURL(Object(c.a)(r));o.value=u,sessionStorage.setItem("userInfoImg",u)}function l(){s.stop(),e.value.srcObject.getTracks()[0].stop()}return Object(i.c)((function(){r()})),Object(i.d)((function(){l()})),{videoRef:e,screenshotCanvasRef:a,uploadLock:n,picShow:t,userHeaderImg:o,init:r,screenshotAndUpload:u,close:l}}},s=(a(478),a(17)),r=Object(s.a)(o,n,[],!1,null,"4430e50c",null);r.options.__file="src/views/demo/faceRecognitionPage/index.vue",t.default=r.exports},434:function(e,t,a){},478:function(e,t,a){"use strict";a(434)}}]);